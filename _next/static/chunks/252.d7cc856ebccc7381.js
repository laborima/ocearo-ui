"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{7252:function(e,t,l){l.r(t);var a=l(57437),r=l(2265),n=l(30166),i=l(53082),o=l(63321);let s=(0,n.default)(()=>l.e(79).then(l.bind(l,68079)),{loadableGenerated:{webpack:()=>[68079]},loading:()=>(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:"Loading documents..."})}),c=(0,n.default)(()=>l.e(73).then(l.bind(l,69073)),{loadableGenerated:{webpack:()=>[69073]},loading:()=>(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:"Loading settings..."})}),u=(0,n.default)(()=>Promise.all([l.e(676),l.e(268),l.e(145),l.e(138)]).then(l.bind(l,59138)),{loadableGenerated:{webpack:()=>[59138]},loading:()=>(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:"Loading media player..."})}),d=(0,n.default)(()=>Promise.all([l.e(676),l.e(268),l.e(677)]).then(l.bind(l,39677)),{loadableGenerated:{webpack:()=>[39677]},loading:()=>(0,a.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:"Loading battery monitor..."})}),m={latitude:46.1591,longitude:-1.1522},f={navigation:e=>"".concat(e,"/@signalk/freeboard-sk/"),instrument:e=>"".concat(e,"/@mxtommy/kip/"),dashboard:e=>e.replace(":3000",":3001")+"/grafana",webcam1:()=>"https://pv.viewsurf.com/2080/Chatelaillon-Port?i=NzU4Mjp1bmRlZmluZWQ",webcam2:()=>"https://pv.viewsurf.com/1478/Chatelaillon-Plage&lt?i=NTkyMDp1bmRlZmluZWQ",weather:(e,t)=>t&&"https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=mm&metricTemp=\xb0C&metricWind=kt&zoom=10&overlay=wind&product=ecmwf&level=surface&lat=".concat(t.latitude,"&lon=").concat(t.longitude,"&message=true")};t.default=e=>{let{view:t}=e,{getSignalKValue:l}=(0,i.yC)(),[n,h]=(0,r.useState)(null),[g,p]=(0,r.useState)(null),{signalkUrl:b}=o.Z.getAll();(0,r.useEffect)(()=>{let e=()=>{try{let e=l("navigation.position")||m;h(t=>t?Math.abs(t.latitude-e.latitude)>.01||Math.abs(t.longitude-e.longitude)>.01?e:t:e),p(null)}catch(e){p("Error fetching position data"),console.error("Position fetch error:",e)}};e();let t=setInterval(e,1e4);return()=>clearInterval(t)},[l]);let w=(0,r.useMemo)(()=>{let e=o.Z.getAll(),l=e.customExternalUrls||{};if(e.showCustomUrls&&l[t])try{if("string"==typeof l[t]&&l[t].includes("${signalkUrl}"))return l[t].replace("${signalkUrl}",b).replace("${latitude}",(null==n?void 0:n.latitude)||m.latitude).replace("${longitude}",(null==n?void 0:n.longitude)||m.longitude);return l[t]}catch(e){console.error("Error using custom URL:",e)}let a=f[t];if(!a)return null;try{return a(b,n)}catch(e){return console.error("Error generating URL:",e),p("Error generating application URL"),null}},[t,n,b]);return(0,a.jsx)("div",{className:"flex flex-col w-full h-full overflow-auto",children:(()=>{if(g)return(0,a.jsx)("div",{className:"text-red-500 p-4",children:g});switch(t){case"manual":return(0,a.jsx)(s,{path:"docs"});case"settings":return(0,a.jsx)(c,{});case"mediaplayer":return(0,a.jsx)(u,{});case"battery":return(0,a.jsx)(d,{});default:return w&&(0,a.jsx)("iframe",{className:"flex-grow border-none",src:w,title:"External Application",onError:()=>p("Failed to load external content")})}})()})}}}]);